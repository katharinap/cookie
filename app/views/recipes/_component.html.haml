.panel.panel-default
  .panel-heading{ id: "heading#{recipe.id}", role: 'tab' }
    %h4.panel-title
      = link_to recipe.name, "#collapse#{recipe.id}", class: 'collapsed', data: { toggle: 'collapse', parent: '#components' }, :'aria-expanded' => 'false', :'aria-controls' => "collapse#{recipe.id}"
  .panel-collapse.collapse{ id: "collapse#{recipe.id}", role: 'tabpanel', aria: { labeledby: "heading#{recipe.id}" } }
    .panel-body
      .row
        .col-md-4.col-md-push-8
          %h4 Ingredients
          %ul.list-unstyled.ingredients
            - recipe.ingredients.each do |ingredient|
              %li= ingredient.value
        .col-md-8.col-md-pull-4
          .recipe-directions        
            - recipe.steps.each do |step|
              %p
                = image_tag(step.picture_url) if step.picture?
                = step.description

          - if recipe.references.any?      
            %h4 References
            %ul.list-unstyled.references
              - recipe.references.each do |reference|
                %li= link_to reference.url, reference.url.html_safe

          - if allow_edit? recipe
            .btn-group
              .btn.btn-default
                = render partial: 'layouts/edit_btn', locals: { path: edit_recipe_path(recipe) }
              .btn.btn-default
                = render partial: 'layouts/delete_btn', locals: { path: recipe_path(recipe) }
